root@testserver:/opt/speedtest# grep -r "new WebSocket" --include="*.js" /opt/speedtest/dist/
/opt/speedtest/dist/index.js:  const wss = new WebSocketServer({ server: httpServer, path: "/api/ws-packet-test" });
/opt/speedtest/dist/public/assets/index-DoTwA7hj.js:For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},zq="DialogDescriptionWarning",Uq=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NL(zq).contentName}}.`;return w.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},EL=mL,TL=gL,ZS=xL,JS=bL,AL=SL,kL=PL,Vq=OL,qu='[cmdk-group=""]',Mx='[cmdk-group-items=""]',Wq='[cmdk-group-heading=""]',e_='[cmdk-item=""]',QO=`${e_}:not([aria-disabled="true"])`,zb="cmdk-item-select",os="data-value",Hq=(e,t,r)=>FK(e,t,r),ML=w.createContext(void 0),Pp=()=>w.useContext(ML),$L=w.createContext(void 0),t_=()=>w.useContext($L),DL=w.createContext(void 0),IL=w.forwardRef((e,t)=>{let r=gl(()=>{var B,J;return{search:"",value:(J=(B=e.value)!=null?B:e.defaultValue)!=null?J:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=gl(()=>new Set),i=gl(()=>new Map),a=gl(()=>new Map),o=gl(()=>new Set),s=RL(e),{label:l,children:c,value:u,onValueChange:f,filter:p,shouldFilter:h,loop:y,disablePointerSelection:m=!1,vimBindings:g=!0,...x}=e,v=lr(),b=lr(),_=lr(),S=w.useRef(null),P=rG();Bs(()=>{if(u!==void 0){let B=u.trim();r.current.value=B,j.emit()}},[u]),Bs(()=>{P(6,I)},[]);let j=w.useMemo(()=>({subscribe:B=>(o.current.add(B),()=>o.current.delete(B)),snapshot:()=>r.current,setState:(B,J,G)=>{var se,pe,ae;if(!Object.is(r.current[B],J)){if(r.current[B]=J,B==="search")E(),C(),P(1,k);else if(B==="value"&&(G||P(5,I),((se=s.current)==null?void 0:se.value)!==void 0)){let he=J??"";(ae=(pe=s.current).onValueChange)==null||ae.call(pe,he);return}j.emit()}},emit:()=>{o.current.forEach(B=>B())}}),[]),O=w.useMemo(()=>({value:(B,J,G)=>{var se;J!==((se=a.current.get(B))==null?void 0:se.value)&&(a.current.set(B,{value:J,keywords:G}),r.current.filtered.items.set(B,N(J,G)),P(2,()=>{C(),j.emit()}))},item:(B,J)=>(n.current.add(B),J&&(i.current.has(J)?i.current.get(J).add(B):i.current.set(J,new Set([B]))),P(3,()=>{E(),C(),r.current.value||k(),j.emit()}),()=>{a.current.delete(B),n.current.delete(B),r.current.filtered.items.delete(B);let G=$();P(4,()=>{E(),(G==null?void 0:G.getAttribute("id"))===B&&k(),j.emit()})}),group:B=>(i.current.has(B)||i.current.set(B,new Set),()=>{a.current.delete(B),i.current.delete(B)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:v,inputId:_,labelId:b,listInnerRef:S}),[]);function N(B,J){var G,se;let pe=(se=(G=s.current)==null?void 0:G.filter)!=null?se:Hq;return B?pe(B,r.current.search,J):0}function C(){if(!r.current.search||s.current.shouldFilter===!1)return;let B=r.current.filtered.items,J=[];r.current.filtered.groups.forEach(se=>{let pe=i.current.get(se),ae=0;pe.forEach(he=>{let Q=B.get(he);ae=Math.max(Q,ae)}),J.push([se,ae])});let G=S.current;U().sort((se,pe)=>{var ae,he;let Q=se.getAttribute("id"),ce=pe.getAttribute("id");return((ae=B.get(ce))!=null?ae:0)-((he=B.get(Q))!=null?he:0)}).forEach(se=>{let pe=se.closest(Mx);pe?pe.appendChild(se.parentElement===pe?se:se.closest(`${Mx} > *`)):G.appendChild(se.parentElement===G?se:se.closest(`${Mx} > *`))}),J.sort((se,pe)=>pe[1]-se[1]).forEach(se=>{var pe;let ae=(pe=S.current)==null?void 0:pe.querySelector(`${qu}[${os}="${encodeURIComponent(se[0])}"]`);ae==null||ae.parentElement.appendChild(ae)})}function k(){let B=U().find(G=>G.getAttribute("aria-disabled")!=="true"),J=B==null?void 0:B.getAttribute(os);j.setState("value",J||void 0)}function E(){var B,J,G,se;if(!r.current.search||s.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let pe=0;for(let ae of n.current){let he=(J=(B=a.current.get(ae))==null?void 0:B.value)!=null?J:"",Q=(se=(G=a.current.get(ae))==null?void 0:G.keywords)!=null?se:[],ce=N(he,Q);r.current.filtered.items.set(ae,ce),ce>0&&pe++}for(let[ae,he]of i.current)for(let Q of he)if(r.current.filtered.items.get(Q)>0){r.current.filtered.groups.add(ae);break}r.current.filtered.count=pe}function I(){var B,J,G;let se=$();se&&(((B=se.parentElement)==null?void 0:B.firstChild)===se&&((G=(J=se.closest(qu))==null?void 0:J.querySelector(Wq))==null||G.scrollIntoView({block:"nearest"})),se.scrollIntoView({block:"nearest"}))}function $(){var B;return(B=S.current)==null?void 0:B.querySelector(`${e_}[aria-selected="true"]`)}function U(){var B;return Array.from(((B=S.current)==null?void 0:B.querySelectorAll(QO))||[])}function F(B){let J=U()[B];J&&j.setState("value",J.getAttribute(os))}function L(B){var J;let G=$(),se=U(),pe=se.findIndex(he=>he===G),ae=se[pe+B];(J=s.current)!=null&&J.loop&&(ae=pe+B<0?se[se.length-1]:pe+B===se.length?se[0]:se[pe+B]),ae&&j.setState("value",ae.getAttribute(os))}function T(B){let J=$(),G=J==null?void 0:J.closest(qu),se;for(;G&&!se;)G=B>0?eG(G,qu):tG(G,qu),se=G==null?void 0:G.querySelector(QO);se?j.setState("value",se.getAttribute(os)):L(B)}let D=()=>F(U().length-1),q=B=>{B.preventDefault(),B.metaKey?D():B.altKey?T(1):L(1)},Z=B=>{B.preventDefault(),B.metaKey?F(0):B.altKey?T(-1):L(-1)};return w.createElement(Ne.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:B=>{var J;if((J=x.onKeyDown)==null||J.call(x,B),!B.defaultPrevented)switch(B.key){case"n":case"j":{g&&B.ctrlKey&&q(B);break}case"ArrowDown":{q(B);break}case"p":case"k":{g&&B.ctrlKey&&Z(B);break}case"ArrowUp":{Z(B);break}case"Home":{B.preventDefault(),F(0);break}case"End":{B.preventDefault(),D();break}case"Enter":if(!B.nativeEvent.isComposing&&B.keyCode!==229){B.preventDefault();let G=$();if(G){let se=new Event(zb);G.dispatchEvent(se)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:iG},l),My(e,B=>w.createElement($L.Provider,{value:j},w.createElement(ML.Provider,{value:O},B))))}),Kq=w.forwardRef((e,t)=>{var r,n;let i=lr(),a=w.useRef(null),o=w.useContext(DL),s=Pp(),l=RL(e),c=(n=(r=l.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;Bs(()=>{if(!c)return s.item(i,o==null?void 0:o.id)},[c]);let u=LL(i,a,[e.value,e.children,a],e.keywords),f=t_(),p=zs(P=>P.value&&P.value===u.current),h=zs(P=>c||s.filter()===!1?!0:P.search?P.filtered.items.get(i)>0:!0);w.useEffect(()=>{let P=a.current;if(!(!P||e.disabled))return P.addEventListener(zb,y),()=>P.removeEventListener(zb,y)},[h,e.onSelect,e.disabled]);function y(){var P,j;m(),(j=(P=l.current).onSelect)==null||j.call(P,u.current)}function m(){f.setState("value",u.current,!0)}if(!h)return null;let{disabled:g,value:x,onSelect:v,forceMount:b,keywords:_,...S}=e;return w.createElement(Ne.div,{ref:sf([a,t]),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!p,"data-disabled":!!g,"data-selected":!!p,onPointerMove:g||s.getDisablePointerSelection()?void 0:m,onClick:g?void 0:y},e.children)}),qq=w.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:i,...a}=e,o=lr(),s=w.useRef(null),l=w.useRef(null),c=lr(),u=Pp(),f=zs(h=>i||u.filter()===!1?!0:h.search?h.filtered.groups.has(o):!0);Bs(()=>u.group(o),[]),LL(o,s,[e.value,e.heading,l]);let p=w.useMemo(()=>({id:o,forceMount:i}),[i]);return w.createElement(Ne.div,{ref:sf([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&w.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),My(e,h=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},w.createElement(DL.Provider,{value:p},h))))}),Gq=w.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,i=w.useRef(null),a=zs(o=>!o.search);return!r&&!a?null:w.createElement(Ne.div,{ref:sf([i,t]),...n,"cmdk-separator":"",role:"separator"})}),Yq=w.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,i=e.value!=null,a=t_(),o=zs(u=>u.search),s=zs(u=>u.value),l=Pp(),c=w.useMemo(()=>{var u;let f=(u=l.listInnerRef.current)==null?void 0:u.querySelector(`${e_}[${os}="${encodeURIComponent(s)}"]`);return f==null?void 0:f.getAttribute("id")},[]);return w.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),w.createElement(Ne.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:i?e.value:o,onChange:u=>{i||a.setState("search",u.target.value),r==null||r(u.target.value)}})}),Qq=w.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...i}=e,a=w.useRef(null),o=w.useRef(null),s=Pp();return w.useEffect(()=>{if(o.current&&a.current){let l=o.current,c=a.current,u,f=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let p=l.offsetHeight;c.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return f.observe(l),()=>{cancelAnimationFrame(u),f.unobserve(l)}}},[]),w.createElement(Ne.div,{ref:sf([a,t]),...i,"cmdk-list":"",role:"listbox","aria-label":n,id:s.listId},My(e,l=>w.createElement("div",{ref:sf([o,s.listInnerRef]),"cmdk-list-sizer":""},l)))}),Xq=w.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:i,contentClassName:a,container:o,...s}=e;return w.createElement(EL,{open:r,onOpenChange:n},w.createElement(TL,{container:o},w.createElement(ZS,{"cmdk-overlay":"",className:i}),w.createElement(JS,{"aria-label":e.label,"cmdk-dialog":"",className:a},w.createElement(IL,{ref:t,...s}))))}),Zq=w.forwardRef((e,t)=>zs(r=>r.filtered.count===0)?w.createElement(Ne.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Jq=w.forwardRef((e,t)=>{let{progress:r,children:n,label:i="Loading...",...a}=e;return w.createElement(Ne.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},My(e,o=>w.createElement("div",{"aria-hidden":!0},o)))}),Qr=Object.assign(IL,{List:Qq,Item:Kq,Input:Yq,Group:qq,Separator:Gq,Dialog:Xq,Empty:Zq,Loading:Jq});function eG(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function tG(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function RL(e){let t=w.useRef(e);return Bs(()=>{t.current=e}),t}var Bs=typeof window>"u"?w.useEffect:w.useLayoutEffect;function gl(e){let t=w.useRef();return t.current===void 0&&(t.current=e()),t}function sf(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function zs(e){let t=t_(),r=()=>e(t.snapshot());return HI.useSyncExternalStore(t.subscribe,r,r)}function LL(e,t,r,n=[]){let i=w.useRef(),a=Pp();return Bs(()=>{var o;let s=(()=>{var c;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=n.map(c=>c.trim());a.value(e,s,l),(o=t.current)==null||o.setAttribute(os,s),i.current=s}),i}var rG=()=>{let[e,t]=w.useState(),r=gl(()=>new Map);return Bs(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,i)=>{r.current.set(n,i),t({})}};function nG(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function My({asChild:e,children:t},r){return e&&w.isValidElement(t)?w.cloneElement(nG(t),{ref:t.ref},r(t.props.children)):r(t)}var iG={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ad=EL,aG=TL,FL=w.forwardRef(({className:e,...t},r)=>d.jsx(ZS,{ref:r,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FL.displayName=ZS.displayName;const Kl=w.forwardRef(({className:e,children:t,...r},n)=>d.jsxs(aG,{children:[d.jsx(FL,{}),d.jsxs(JS,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,d.jsxs(Vq,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Ny,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kl.displayName=JS.displayName;const ql=({className:e,...t})=>d.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ql.displayName="DialogHeader";const Gl=({className:e,...t})=>d.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Gl.displayName="DialogFooter";const Yl=w.forwardRef(({className:e,...t},r)=>d.jsx(AL,{ref:r,className:Pe("text-lg font-semibold leading-none tracking-tight",e),...t}));Yl.displayName=AL.displayName;const Ql=w.forwardRef(({className:e,...t},r)=>d.jsx(kL,{ref:r,className:Pe("text-sm text-muted-foreground",e),...t}));Ql.displayName=kL.displayName;const BL=w.forwardRef(({className:e,...t},r)=>d.jsx(Qr,{ref:r,className:Pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));BL.displayName=Qr.displayName;const zL=w.forwardRef(({className:e,...t},r)=>d.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[d.jsx(WS,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),d.jsx(Qr.Input,{ref:r,className:Pe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));zL.displayName=Qr.Input.displayName;const oG=w.forwardRef(({className:e,...t},r)=>d.jsx(Qr.List,{ref:r,className:Pe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));oG.displayName=Qr.List.displayName;const UL=w.forwardRef((e,t)=>d.jsx(Qr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));UL.displayName=Qr.Empty.displayName;const VL=w.forwardRef(({className:e,...t},r)=>d.jsx(Qr.Group,{ref:r,className:Pe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));VL.displayName=Qr.Group.displayName;const sG=w.forwardRef(({className:e,...t},r)=>d.jsx(Qr.Separator,{ref:r,className:Pe("-mx-1 h-px bg-border",e),...t}));sG.displayName=Qr.Separator.displayName;const Ub=w.forwardRef(({className:e,...t},r)=>d.jsx(Qr.Item,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Ub.displayName=Qr.Item.displayName;const lG=["top","right","bottom","left"],To=Math.min,sn=Math.max,Am=Math.round,vh=Math.floor,Bi=e=>({x:e,y:e}),cG={left:"right",right:"left",bottom:"top",top:"bottom"},uG={start:"end",end:"start"};function Vb(e,t,r){return sn(e,To(t,r))}function Na(e,t){return typeof e=="function"?e(t):e}function Ea(e){return e.split("-")[0]}function mu(e){return e.split("-")[1]}function r_(e){return e==="x"?"y":"x"}function n_(e){return e==="y"?"height":"width"}function Ao(e){return["top","bottom"].includes(Ea(e))?"y":"x"}function i_(e){return r_(Ao(e))}function dG(e,t,r){r===void 0&&(r=!1);const n=mu(e),i=i_(e),a=n_(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=km(o)),[o,km(o)]}function fG(e){const t=km(e);return[Wb(e),t,Wb(t)]}function Wb(e){return e.replace(/start|end/g,t=>uG[t])}function pG(e,t,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?a:o;default:return[]}}function hG(e,t,r,n){const i=mu(e);let a=pG(Ea(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(Wb)))),a}function km(e){return e.replace(/left|right|bottom|top/g,t=>cG[t])}function mG(e){return{top:0,right:0,bottom:0,left:0,...e}}function WL(e){return typeof e!="number"?mG(e):{top:e,right:e,bottom:e,left:e}}function Mm(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function XO(e,t,r){let{reference:n,floating:i}=e;const a=Ao(t),o=i_(t),s=n_(o),l=Ea(t),c=a==="y",u=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,p=n[s]/2-i[s]/2;let h;switch(l){case"top":h={x:u,y:n.y-i.height};break;case"bottom":h={x:u,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-i.width,y:f};break;default:h={x:n.x,y:n.y}}switch(mu(t)){case"start":h[o]-=p*(r&&c?-1:1);break;case"end":h[o]+=p*(r&&c?-1:1);break}return h}const vG=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=XO(c,n,l),p=n,h={},y=0;for(let m=0;m<s.length;m++){const{name:g,fn:x}=s[m],{x:v,y:b,data:_,reset:S}=await x({x:u,y:f,initialPlacement:n,placement:p,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=v??u,f=b??f,h={...h,[g]:{...h[g],..._}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:f}=XO(c,p,l)),m=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:h}};async function lf(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=Na(t,e),y=WL(h),g=s[p?f==="floating"?"reference":"floating":f],x=Mm(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(g)))==null||r?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),v=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Mm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:b,strategy:l}):v);return{top:(x.top-S.top+y.top)/_.y,bottom:(S.bottom-x.bottom+y.bottom)/_.y,left:(x.left-S.left+y.left)/_.x,right:(S.right-x.right+y.right)/_.x}}const yG=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=Na(e,t)||{};if(c==null)return{};const f=WL(u),p={x:r,y:n},h=i_(i),y=n_(h),m=await o.getDimensions(c),g=h==="y",x=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=a.reference[y]+a.reference[h]-p[h]-a.floating[y],S=p[h]-a.reference[h],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let j=P?P[b]:0;(!j||!await(o.isElement==null?void 0:o.isElement(P)))&&(j=s.floating[b]||a.floating[y]);const O=_/2-S/2,N=j/2-m[y]/2-1,C=To(f[x],N),k=To(f[v],N),E=C,I=j-m[y]-k,$=j/2-m[y]/2+O,U=Vb(E,$,I),F=!l.arrow&&mu(i)!=null&&$!==U&&a.reference[y]/2-($<E?C:k)-m[y]/2<0,L=F?$<E?$-E:$-I:0;return{[h]:p[h]+L,data:{[h]:U,centerOffset:$-U-L,...F&&{alignmentOffset:L}},reset:F}}}),gG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...g}=Na(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const x=Ea(i),v=Ao(s),b=Ea(s)===s,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=p||(b||!m?[km(s)]:fG(s)),P=y!=="none";!p&&P&&S.push(...hG(s,m,y,_));const j=[s,...S],O=await lf(t,g),N=[];let C=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&N.push(O[x]),f){const $=dG(i,o,_);N.push(O[$[0]],O[$[1]])}if(C=[...C,{placement:i,overflows:N}],!N.every($=>$<=0)){var k,E;const $=(((k=a.flip)==null?void 0:k.index)||0)+1,U=j[$];if(U)return{data:{index:$,overflows:C},reset:{placement:U}};let F=(E=C.filter(L=>L.overflows[0]<=0).sort((L,T)=>L.overflows[1]-T.overflows[1])[0])==null?void 0:E.placement;if(!F)switch(h){case"bestFit":{var I;const L=(I=C.filter(T=>{if(P){const D=Ao(T.placement);return D===v||D==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(D=>D>0).reduce((D,q)=>D+q,0)]).sort((T,D)=>T[1]-D[1])[0])==null?void 0:I[0];L&&(F=L);break}case"initialPlacement":F=s;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function ZO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function JO(e){return lG.some(t=>e[t]>=0)}const xG=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Na(e,t);switch(n){case"referenceHidden":{const a=await lf(t,{...i,elementContext:"reference"}),o=ZO(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:JO(o)}}}case"escaped":{const a=await lf(t,{...i,altBoundary:!0}),o=ZO(a,r.floating);return{data:{escapedOffsets:o,escaped:JO(o)}}}default:return{}}}}};async function bG(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Ea(r),s=mu(r),l=Ao(r)==="y",c=["left","top"].includes(o)?-1:1,u=a&&l?-1:1,f=Na(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof y=="number"&&(h=s==="end"?y*-1:y),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}}const wG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await bG(t,e);return o===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},SG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:g=>{let{x,y:v}=g;return{x,y:v}}},...l}=Na(e,t),c={x:r,y:n},u=await lf(t,l),f=Ao(Ea(i)),p=r_(f);let h=c[p],y=c[f];if(a){const g=p==="y"?"top":"left",x=p==="y"?"bottom":"right",v=h+u[g],b=h-u[x];h=Vb(v,h,b)}if(o){const g=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=y+u[g],b=y-u[x];y=Vb(v,y,b)}const m=s.fn({...t,[p]:h,[f]:y});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[p]:a,[f]:o}}}}}},_G=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=Na(e,t),u={x:r,y:n},f=Ao(i),p=r_(f);let h=u[p],y=u[f];const m=Na(s,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=p==="y"?"height":"width",_=a.reference[p]-a.floating[b]+g.mainAxis,S=a.reference[p]+a.reference[b]-g.mainAxis;h<_?h=_:h>S&&(h=S)}if(c){var x,v;const b=p==="y"?"width":"height",_=["top","left"].includes(Ea(i)),S=a.reference[f]-a.floating[b]+(_&&((x=o.offset)==null?void 0:x[f])||0)+(_?0:g.crossAxis),P=a.reference[f]+a.reference[b]+(_?0:((v=o.offset)==null?void 0:v[f])||0)-(_?g.crossAxis:0);y<S?y=S:y>P&&(y=P)}return{[p]:h,[f]:y}}}},PG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:o,elements:s}=t,{apply:l=()=>{},...c}=Na(e,t),u=await lf(t,c),f=Ea(i),p=mu(i),h=Ao(i)==="y",{width:y,height:m}=a.floating;let g,x;f==="top"||f==="bottom"?(g=f,x=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=f,g=p==="end"?"top":"bottom");const v=m-u.top-u.bottom,b=y-u.left-u.right,_=To(m-u[g],v),S=To(y-u[x],b),P=!t.middlewareData.shift;let j=_,O=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(O=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(j=v),P&&!p){const C=sn(u.left,0),k=sn(u.right,0),E=sn(u.top,0),I=sn(u.bottom,0);h?O=y-2*(C!==0||k!==0?C+k:sn(u.left,u.right)):j=m-2*(E!==0||I!==0?E+I:sn(u.top,u.bottom))}await l({...t,availableWidth:O,availableHeight:j});const N=await o.getDimensions(s.floating);return y!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function $y(){return typeof window<"u"}function vu(e){return HL(e)?(e.nodeName||"").toLowerCase():"#document"}function mn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zi(e){var t;return(t=(HL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function HL(e){return $y()?e instanceof Node||e instanceof mn(e).Node:!1}function di(e){return $y()?e instanceof Element||e instanceof mn(e).Element:!1}function Ki(e){return $y()?e instanceof HTMLElement||e instanceof mn(e).HTMLElement:!1}function eC(e){return!$y()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof mn(e).ShadowRoot}function jp(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=fi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function jG(e){return["table","td","th"].includes(vu(e))}function Dy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function a_(e){const t=o_(),r=di(e)?fi(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function OG(e){let t=ko(e);for(;Ki(t)&&!Cc(t);){if(a_(t))return t;if(Dy(t))return null;t=ko(t)}return null}function o_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cc(e){return["html","body","#document"].includes(vu(e))}function fi(e){return mn(e).getComputedStyle(e)}function Iy(e){return di(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ko(e){if(vu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eC(e)&&e.host||Zi(e);return eC(t)?t.host:t}function KL(e){const t=ko(e);return Cc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ki(t)&&jp(t)?t:KL(t)}function cf(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=KL(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=mn(i);if(a){const s=Hb(o);return t.concat(o,o.visualViewport||[],jp(i)?i:[],s&&r?cf(s):[])}return t.concat(i,cf(i,[],r))}function Hb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qL(e){const t=fi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Ki(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,s=Am(r)!==a||Am(n)!==o;return s&&(r=a,n=o),{width:r,height:n,$:s}}function s_(e){return di(e)?e:e.contextElement}function Xl(e){const t=s_(e);if(!Ki(t))return Bi(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=qL(t);let o=(a?Am(r.width):r.width)/n,s=(a?Am(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const CG=Bi(0);function GL(e){const t=mn(e);return!o_()||!t.visualViewport?CG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function NG(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==mn(e)?!1:t}function Us(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=s_(e);let o=Bi(1);t&&(n?di(n)&&(o=Xl(n)):o=Xl(e));const s=NG(a,r,n)?GL(a):Bi(0);let l=(i.left+s.x)/o.x,c=(i.top+s.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(a){const p=mn(a),h=n&&di(n)?mn(n):n;let y=p,m=Hb(y);for(;m&&n&&h!==y;){const g=Xl(m),x=m.getBoundingClientRect(),v=fi(m),b=x.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=x.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,f*=g.y,l+=b,c+=_,y=mn(m),m=Hb(y)}}return Mm({width:u,height:f,x:l,y:c})}function l_(e,t){const r=Iy(e).scrollLeft;return t?t.left+r:Us(Zi(e)).left+r}function YL(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:l_(e,n)),a=n.top+t.scrollTop;return{x:i,y:a}}function EG(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=Zi(n),s=t?Dy(t.floating):!1;if(n===o||s&&a)return r;let l={scrollLeft:0,scrollTop:0},c=Bi(1);const u=Bi(0),f=Ki(n);if((f||!f&&!a)&&((vu(n)!=="body"||jp(o))&&(l=Iy(n)),Ki(n))){const h=Us(n);c=Xl(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}const p=o&&!f&&!a?YL(o,l,!0):Bi(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:r.y*c.y-l.scrollTop*c.y+u.y+p.y}}function TG(e){return Array.from(e.getClientRects())}function AG(e){const t=Zi(e),r=Iy(e),n=e.ownerDocument.body,i=sn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=sn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+l_(e);const s=-r.scrollTop;return fi(n).direction==="rtl"&&(o+=sn(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:s}}function kG(e,t){const r=mn(e),n=Zi(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const c=o_();(!c||c&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function MG(e,t){const r=Us(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=Ki(e)?Xl(e):Bi(1),o=e.clientWidth*a.x,s=e.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:o,height:s,x:l,y:c}}function tC(e,t,r){let n;if(t==="viewport")n=kG(e,r);else if(t==="document")n=AG(Zi(e));else if(di(t))n=MG(t,r);else{const i=GL(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Mm(n)}function QL(e,t){const r=ko(e);return r===t||!di(r)||Cc(r)?!1:fi(r).position==="fixed"||QL(r,t)}function $G(e,t){const r=t.get(e);if(r)return r;let n=cf(e,[],!1).filter(s=>di(s)&&vu(s)!=="body"),i=null;const a=fi(e).position==="fixed";let o=a?ko(e):e;for(;di(o)&&!Cc(o);){const s=fi(o),l=a_(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||jp(o)&&!l&&QL(e,o))?n=n.filter(u=>u!==o):i=s,o=ko(o)}return t.set(e,n),n}function DG(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?Dy(t)?[]:$G(t,this._c):[].concat(r),n],s=o[0],l=o.reduce((c,u)=>{const f=tC(t,u,i);return c.top=sn(f.top,c.top),c.right=To(f.right,c.right),c.bottom=To(f.bottom,c.bottom),c.left=sn(f.left,c.left),c},tC(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IG(e){const{width:t,height:r}=qL(e);return{width:t,height:r}}function RG(e,t,r){const n=Ki(t),i=Zi(t),a=r==="fixed",o=Us(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=Bi(0);if(n||!n&&!a)if((vu(t)!=="body"||jp(i))&&(s=Iy(t)),n){const p=Us(t,!0,a,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&(l.x=l_(i));const c=i&&!n&&!a?YL(i,s):Bi(0),u=o.left+s.scrollLeft-l.x-c.x,f=o.top+s.scrollTop-l.y-c.y;return{x:u,y:f,width:o.width,height:o.height}}function $x(e){return fi(e).position==="static"}function rC(e,t){if(!Ki(e)||fi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Zi(e)===r&&(r=r.ownerDocument.body),r}function XL(e,t){const r=mn(e);if(Dy(e))return r;if(!Ki(e)){let i=ko(e);for(;i&&!Cc(i);){if(di(i)&&!$x(i))return i;i=ko(i)}return r}let n=rC(e,t);for(;n&&jG(n)&&$x(n);)n=rC(n,t);return n&&Cc(n)&&$x(n)&&!a_(n)?r:n||OG(e)||r}const LG=async function(e){const t=this.getOffsetParent||XL,r=this.getDimensions,n=await r(e.floating);return{reference:RG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function FG(e){return fi(e).direction==="rtl"}const BG={convertOffsetParentRelativeRectToViewportRelativeRect:EG,getDocumentElement:Zi,getClippingRect:DG,getOffsetParent:XL,getElementRects:LG,getClientRects:TG,getDimensions:IG,getScale:Xl,isElement:di,isRTL:FG};function zG(e,t){let r=null,n;const i=Zi(e);function a(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:c,top:u,width:f,height:p}=e.getBoundingClientRect();if(s||t(),!f||!p)return;const h=vh(u),y=vh(i.clientWidth-(c+f)),m=vh(i.clientHeight-(u+p)),g=vh(c),v={rootMargin:-h+"px "+-y+"px "+-m+"px "+-g+"px",threshold:sn(0,To(1,l))||1};let b=!0;function _(S){const P=S[0].intersectionRatio;if(P!==l){if(!b)return o();P?o(!1,P):n=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(_,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(_,v)}r.observe(e)}return o(!0),a}function UG(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=s_(e),u=i||a?[...c?cf(c):[],...cf(t)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",r,{passive:!0}),a&&x.addEventListener("resize",r)});const f=c&&s?zG(c,r):null;let p=-1,h=null;o&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),r()}),c&&!l&&h.observe(c),h.observe(t));let y,m=l?Us(e):null;l&&g();function g(){const x=Us(e);m&&(x.x!==m.x||x.y!==m.y||x.width!==m.width||x.height!==m.height)&&r(),m=x,y=requestAnimationFrame(g)}return r(),()=>{var x;u.forEach(v=>{i&&v.removeEventListener("scroll",r),a&&v.removeEventListener("resize",r)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(y)}}const VG=wG,WG=SG,HG=gG,KG=PG,qG=xG,nC=yG,GG=_G,YG=(e,t,r)=>{const n=new Map,i={platform:BG,...r},a={...i.platform,_c:n};return vG(e,t,{...i,platform:a})};var Xh=typeof document<"u"?w.useLayoutEffect:w.useEffect;function $m(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!$m(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!$m(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ZL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function iC(e,t){const r=ZL(e);return Math.round(t*r)/r}function Dx(e){const t=w.useRef(e);return Xh(()=>{t.current=e}),t}function QG(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,f]=w.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=w.useState(n);$m(p,n)||h(n);const[y,m]=w.useState(null),[g,x]=w.useState(null),v=w.useCallback(T=>{T!==P.current&&(P.current=T,m(T))},[]),b=w.useCallback(T=>{T!==j.current&&(j.current=T,x(T))},[]),_=a||y,S=o||g,P=w.useRef(null),j=w.useRef(null),O=w.useRef(u),N=l!=null,C=Dx(l),k=Dx(i),E=Dx(c),I=w.useCallback(()=>{if(!P.current||!j.current)return;const T={placement:t,strategy:r,middleware:p};k.current&&(T.platform=k.current),YG(P.current,j.current,T).then(D=>{const q={...D,isPositioned:E.current!==!1};$.current&&!$m(O.current,q)&&(O.current=q,tl.flushSync(()=>{f(q)}))})},[p,t,r,k,E]);Xh(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[c]);const $=w.useRef(!1);Xh(()=>($.current=!0,()=>{$.current=!1}),[]),Xh(()=>{if(_&&(P.current=_),S&&(j.current=S),_&&S){if(C.current)return C.current(_,S,I);I()}},[_,S,I,C,N]);const U=w.useMemo(()=>({reference:P,floating:j,setReference:v,setFloating:b}),[v,b]),F=w.useMemo(()=>({reference:_,floating:S}),[_,S]),L=w.useMemo(()=>{const T={position:r,left:0,top:0};if(!F.floating)return T;const D=iC(F.floating,u.x),q=iC(F.floating,u.y);return s?{...T,transform:"translate("+D+"px, "+q+"px)",...ZL(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:q}},[r,s,F.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:I,refs:U,elements:F,floatingStyles:L}),[u,I,U,F,L])}const XG=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?nC({element:n.current,padding:i}).fn(r):{}:n?nC({element:n,padding:i}).fn(r):{}}}},ZG=(e,t)=>({...VG(e),options:[e,t]}),JG=(e,t)=>({...WG(e),options:[e,t]}),eY=(e,t)=>({...GG(e),options:[e,t]}),tY=(e,t)=>({...HG(e),options:[e,t]}),rY=(e,t)=>({...KG(e),options:[e,t]}),nY=(e,t)=>({...qG(e),options:[e,t]}),iY=(e,t)=>({...XG(e),options:[e,t]});var aY="Arrow",JL=w.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return d.jsx(Ne.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});JL.displayName=aY;var oY=JL;function sY(e,t=[]){let r=[];function n(a,o){const s=w.createContext(o),l=r.length;r=[...r,o];function c(f){const{scope:p,children:h,...y}=f,m=(p==null?void 0:p[e][l])||s,g=w.useMemo(()=>y,Object.values(y));return d.jsx(m.Provider,{value:g,children:h})}function u(f,p){const h=(p==null?void 0:p[e][l])||s,y=w.useContext(h);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return c.displayName=a+"Provider",[c,u]}const i=()=>{const a=r.map(o=>w.createContext(o));return function(s){const l=(s==null?void 0:s[e])||a;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return i.scopeName=e,[n,lY(i,...t)]}function lY(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((s,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...s,...f}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function eF(e){const[t,r]=w.useState(void 0);return wr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,s;if("borderBoxSize"in a){const l=a.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;r({width:o,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var c_="Popper",[tF,yu]=sY(c_),[cY,rF]=tF(c_),nF=e=>{const{__scopePopper:t,children:r}=e,[n,i]=w.useState(null);return d.jsx(cY,{scope:t,anchor:n,onAnchorChange:i,children:r})};nF.displayName=c_;var iF="PopperAnchor",aF=w.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=rF(iF,r),o=w.useRef(null),s=et(t,o);return w.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:d.jsx(Ne.div,{...i,ref:s})});aF.displayName=iF;var u_="PopperContent",[uY,dY]=tF(u_),oF=w.forwardRef((e,t)=>{var ae,he,Q,ce,de,K;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:y,...m}=e,g=rF(u_,r),[x,v]=w.useState(null),b=et(t,Y=>v(Y)),[_,S]=w.useState(null),P=eF(_),j=(P==null?void 0:P.width)??0,O=(P==null?void 0:P.height)??0,N=n+(a!=="center"?"-"+a:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(c)?c:[c],E=k.length>0,I={padding:C,boundary:k.filter(pY),altBoundary:E},{refs:$,floatingStyles:U,placement:F,isPositioned:L,middlewareData:T}=QG({strategy:"fixed",placement:N,whileElementsMounted:(...Y)=>UG(...Y,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[ZG({mainAxis:i+O,alignmentAxis:o}),l&&JG({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?eY():void 0,...I}),l&&tY({...I}),rY({...I,apply:({elements:Y,rects:H,availableWidth:te,availableHeight:be})=>{const{width:X,height:A}=H.reference,R=Y.floating.style;R.setProperty("--radix-popper-available-width",`${te}px`),R.setProperty("--radix-popper-available-height",`${be}px`),R.setProperty("--radix-popper-anchor-width",`${X}px`),R.setProperty("--radix-popper-anchor-height",`${A}px`)}}),_&&iY({element:_,padding:s}),hY({arrowWidth:j,arrowHeight:O}),p&&nY({strategy:"referenceHidden",...I})]}),[D,q]=cF(F),Z=br(y);wr(()=>{L&&(Z==null||Z())},[L,Z]);const B=(ae=T.arrow)==null?void 0:ae.x,J=(he=T.arrow)==null?void 0:he.y,G=((Q=T.arrow)==null?void 0:Q.centerOffset)!==0,[se,pe]=w.useState();return wr(()=>{x&&pe(window.getComputedStyle(x).zIndex)},[x]),d.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:L?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ce=T.transformOrigin)==null?void 0:ce.x,(de=T.transformOrigin)==null?void 0:de.y].join(" "),...((K=T.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:d.jsx(uY,{scope:r,placedSide:D,onArrowChange:S,arrowX:B,arrowY:J,shouldHideArrow:G,children:d.jsx(Ne.div,{"data-side":D,"data-align":q,...m,ref:b,style:{...m.style,animation:L?void 0:"none"}})})})});oF.displayName=u_;var sF="PopperArrow",fY={top:"bottom",right:"left",bottom:"top",left:"right"},lF=w.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,a=dY(sF,n),o=fY[a.placedSide];return d.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:d.jsx(oY,{...i,ref:r,style:{...i.style,display:"block"}})})});lF.displayName=sF;function pY(e){return e!==null}var hY=e=>({name:"transformOrigin",options:e,fn(t){var g,x,v;const{placement:r,rects:n,middlewareData:i}=t,o=((g=i.arrow)==null?void 0:g.centerOffset)!==0,s=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=cF(r),f={start:"0%",center:"50%",end:"100%"}[u],p=(((x=i.arrow)==null?void 0:x.x)??0)+s/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let y="",m="";return c==="bottom"?(y=o?f:`${p}px`,m=`${-l}px`):c==="top"?(y=o?f:`${p}px`,m=`${n.floating.height+l}px`):c==="right"?(y=`${-l}px`,m=o?f:`${h}px`):c==="left"&&(y=`${n.floating.width+l}px`,m=o?f:`${h}px`),{data:{x:y,y:m}}}});function cF(e){const[t,r="center"]=e.split("-");return[t,r]}var d_=nF,Ry=aF,f_=oF,p_=lF,h_="Popover",[uF,NEe]=Bo(h_,[yu]),Op=yu(),[mY,zo]=uF(h_),dF=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,s=Op(t),l=w.useRef(null),[c,u]=w.useState(!1),[f=!1,p]=Ca({prop:n,defaultProp:i,onChange:a});return d.jsx(d_,{...s,children:d.jsx(mY,{scope:t,contentId:lr(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:w.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:c,onCustomAnchorAdd:w.useCallback(()=>u(!0),[]),onCustomAnchorRemove:w.useCallback(()=>u(!1),[]),modal:o,children:r})})};dF.displayName=h_;var fF="PopoverAnchor",vY=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=zo(fF,r),a=Op(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return w.useEffect(()=>(o(),()=>s()),[o,s]),d.jsx(Ry,{...a,...n,ref:t})});vY.displayName=fF;var pF="PopoverTrigger",hF=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=zo(pF,r),a=Op(r),o=et(t,i.triggerRef),s=d.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xF(i.open),...n,ref:o,onClick:xe(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:d.jsx(Ry,{asChild:!0,...a,children:s})});hF.displayName=pF;var m_="PopoverPortal",[yY,gY]=uF(m_,{forceMount:void 0}),mF=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,a=zo(m_,t);return d.jsx(yY,{scope:t,forceMount:r,children:d.jsx(Un,{present:r||a.open,children:d.jsx(pu,{asChild:!0,container:i,children:n})})})};mF.displayName=m_;var Nc="PopoverContent",vF=w.forwardRef((e,t)=>{const r=gY(Nc,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,a=zo(Nc,e.__scopePopover);return d.jsx(Un,{present:n||a.open,children:a.modal?d.jsx(xY,{...i,ref:t}):d.jsx(bY,{...i,ref:t})})});vF.displayName=Nc;var xY=w.forwardRef((e,t)=>{const r=zo(Nc,e.__scopePopover),n=w.useRef(null),i=et(t,n),a=w.useRef(!1);return w.useEffect(()=>{const o=n.current;if(o)return ky(o)},[]),d.jsx(_p,{as:Hi,allowPinchZoom:!0,children:d.jsx(yF,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),a.current||(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,c=s.button===2||l;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),bY=w.forwardRef((e,t)=>{const r=zo(Nc,e.__scopePopover),n=w.useRef(!1),i=w.useRef(!1);return d.jsx(yF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(s=r.triggerRef.current)==null||s.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((c=r.triggerRef.current)==null?void 0:c.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),yF=w.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=e,p=zo(Nc,r),h=Op(r);return Ty(),d.jsx(Sp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:d.jsx(fu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:d.jsx(f_,{"data-state":xF(p.open),role:"dialog",id:p.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),gF="PopoverClose",wY=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=zo(gF,r);return d.jsx(Ne.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>i.onOpenChange(!1))})});wY.displayName=gF;var SY="PopoverArrow",_Y=w.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Op(r);return d.jsx(p_,{...i,...n,ref:t})});_Y.displayName=SY;function xF(e){return e?"open":"closed"}var PY=dF,jY=hF,OY=mF,bF=vF;const uf=PY,df=jY,Ec=w.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>d.jsx(OY,{children:d.jsx(bF,{ref:i,align:t,sideOffset:r,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ec.displayName=bF.displayName;function CY({customerId:e,testLocation:t,internetPlan:r,onCustomerIdChange:n,onTestLocationChange:i,onInternetPlanChange:a}){const[o,s]=w.useState(!1),{data:l,isLoading:c}=Eo({queryKey:["/api/internet-plans"],queryFn:async()=>{const f=await fetch("/api/internet-plans");if(!f.ok)throw new Error("Failed to fetch internet plans");return f.json()}}),u=(l==null?void 0:l.filter(f=>f.isActive))||[];return d.jsxs("div",{className:"mb-6 bg-white rounded-lg shadow-sm p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Customer Information"}),d.jsx("form",{id:"customerForm",className:"space-y-4",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx(gt,{htmlFor:"customerId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),d.jsx(Jt,{type:"text",id:"customerId",value:e,onChange:f=>n(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Enter customer ID",required:!0})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx(gt,{htmlFor:"testLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Location"}),d.jsx(Jt,{type:"text",id:"testLocation",value:t,onChange:f=>i(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"E.g., Office, Home, Client Site"})]}),d.jsxs("div",{className:"flex-1",children:[d.jsxs(gt,{htmlFor:"internetPlan",className:"block text-sm font-medium text-gray-700 mb-1",children:["Internet Plan ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs(uf,{open:o,onOpenChange:s,children:[d.jsx(df,{asChild:!0,children:d.jsxs(De,{variant:"outline",role:"combobox","aria-expanded":o,className:`w-full justify-between ${r==="not_specified"?"border-red-300 ring-1 ring-red-300":""}`,disabled:c,children:[c?"Loading plans...":r==="not_specified"?"Not specified":r||"Select internet plan",d.jsx(T7,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),d.jsx(Ec,{className:"w-full p-0",children:d.jsxs(BL,{children:[d.jsxs("div",{className:"flex items-center border-b px-3",children:[d.jsx(WS,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),d.jsx(zL,{placeholder:"Search plan...",className:"flex-1"})]}),d.jsx(UL,{children:"No internet plan found."}),d.jsxs(VL,{children:[d.jsxs(Ub,{value:"not_specified",className:"opacity-50 cursor-not-allowed",disabled:!0,children:[d.jsx(Em,{className:Pe("mr-2 h-4 w-4",r==="not_specified"?"opacity-100":"opacity-0")}),"Not specified ",d.jsx("span",{className:"text-red-500 ml-2 text-xs",children:"(Please select a valid plan)"})]},"not_specified"),u.map(f=>d.jsxs(Ub,{value:f.name,onSelect:()=>{a(f.name),s(!1)},children:[d.jsx(Em,{className:Pe("mr-2 h-4 w-4",r===f.name?"opacity-100":"opacity-0")}),f.name," (",f.downloadSpeed,"/",f.uploadSpeed," Mbps)"]},f.id))]})]})})]})]})]})})]})}function Ix({value:e,maxValue:t,color:r="primary",invert:n=!1}){const a=2*Math.PI*40;let o=e/t*100;o=Math.min(Math.max(o,0),100),n&&(o=100-o);const s=a-o/100*a;let l="text-primary";return r==="warning"&&(l="text-amber-500"),r==="destructive"&&(l="text-red-500"),r==="secondary"&&(l="text-green-500"),d.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[d.jsx("circle",{className:"text-gray-200 stroke-current",strokeWidth:"10",cx:"50",cy:"50",r:40,fill:"transparent"}),d.jsx("circle",{className:`${l} stroke-current`,strokeWidth:"10",strokeLinecap:"round",cx:"50",cy:"50",r:40,fill:"transparent",strokeDasharray:a,strokeDashoffset:s,style:{transition:"stroke-dashoffset 0.5s ease-in-out"}})]})}const NY=async()=>{try{console.log("Starting real ping measurement");const e="/api/speedtest/download?size=1",t=10;let r=0;for(let i=0;i<t;i++){const a=Date.now(),o=await fetch(e,{method:"GET",cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);await o.arrayBuffer();const l=Date.now()-a;console.log(`Ping measurement ${i+1}/${t}: ${l}ms`),r+=l,await new Promise(c=>setTimeout(c,100))}const n=Math.round(r/t);return console.log(`Average ping: ${n}ms`),n}catch(e){throw console.error("Error measuring ping:",e),e}},EY=async()=>{try{console.log("Starting real jitter measurement");const e="/api/speedtest/download?size=1",t=20,r=[];for(let a=0;a<t;a++){const o=Date.now(),s=await fetch(e,{method:"GET",cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);await s.arrayBuffer();const l=Date.now()-o;r.push(l),console.log(`Jitter measurement ${a+1}/${t}: ${l}ms`),await new Promise(c=>setTimeout(c,80+Math.random()*40))}let n=0;for(let a=1;a<r.length;a++){const o=Math.abs(r[a]-r[a-1]);n+=o}const i=parseFloat((n/(r.length-1)).toFixed(1));return console.log(`Calculated jitter: ${i}ms from ${t} measurements`),i}catch(e){throw console.error("Error measuring jitter:",e),e}},TY=async()=>new Promise((e,t)=>{try{console.log("Starting real packet loss measurement via WebSocket");let r;try{r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/ws-packet-test`,console.log("Connecting to WebSocket at:",r)}catch(m){console.error("Error creating WebSocket URL:",m),console.warn("Error in WebSocket URL construction, simulating packet loss measurement"),setTimeout(()=>e(.5),1e3);return}let n;try{n=new WebSocket(r)}catch(m){const g=m;if(console.error("Failed to create WebSocket connection:",g),g.toString().includes("SyntaxError")){console.warn("Development environment or WebSocket error detected, returning simulated packet loss value"),setTimeout(()=>e(.5),1e3);return}throw g}let i=null,a=0,o=0,s=null,l=!1;const c=1e4,u=25,f=100,p=new Set,h=()=>{s!==null&&(clearInterval(s),s=null);try{n&&(n.readyState===WebSocket.OPEN||n.readyState===WebSocket.CONNECTING)&&n.close()}catch(m){console.error("Error closing WebSocket:",m)}},y=setTimeout(()=>{if(!l){console.warn("Packet loss test timed out"),h();const m=a-o,g=a>0?m/a*100:0;e(parseFloat(g.toFixed(2)))}},c);n.onopen=()=>{console.log("WebSocket connection established for packet loss test"),n.send(JSON.stringify({type:"init"}))},n.onmessage=m=>{try{const g=JSON.parse(m.data);switch(g.type){case"init":{i=g.testId,console.log(`Packet loss test initialized with ID: ${i}`),s=window.setInterval(()=>{if(a>=f){s!==null&&(clearInterval(s),s=null,n.send(JSON.stringify({type:"client-sent",count:a})),n.send(JSON.stringify({type:"get-results"})));return}const x=a++;n.send(JSON.stringify({type:"packet",packetId:x,timestamp:Date.now()}))},u);break}case"ack":{p.has(g.packetId)||(p.add(g.packetId),o++);break}case"results":{l=!0,clearTimeout(y),h();const x=a-o,v=a>0?x/a*100:0;console.log(`Server reports: ${g.lostPackets} lost out of ${g.sentPackets} (${g.packetLossPercentage}%)`),console.log(`Client calculates: ${x} lost out of ${a} (${v.toFixed(2)}%)`),e(parseFloat(v.toFixed(2)));break}case"error":{console.error("WebSocket packet loss test error:",g.message);break}}}catch(g){console.error("Error processing packet loss test message:",g)}},n.onerror=m=>{if(console.error("WebSocket error during packet loss test:",m),h(),clearTimeout(y),a===0)console.warn("WebSocket error before any packets could be sent - reporting connectivity issue"),e(100);else{const g=a-o,x=a>0?g/a*100:100;console.log(`Client calculated packet loss: ${g} lost out of ${a} (${x.toFixed(2)}%)`),e(parseFloat(x.toFixed(2)))}},n.onclose=()=>{if(console.log("WebSocket connection closed for packet loss test"),h(),clearTimeout(y),!l)if(a===0)console.warn("WebSocket connection closed before any packets could be sent - reporting connectivity issue"),e(100);else{const m=a-o,g=a>0?m/a*100:100;console.log(`Client calculated packet loss (on close): ${m} lost out of ${a} (${g.toFixed(2)}%)`),e(parseFloat(g.toFixed(2)))}}}catch(r){console.error("Error in packet loss test:",r),console.warn("Critical error in packet loss test - reporting as connectivity issue"),e(100)}}),Gu=1e4,AY=200,kY=25*1024*1024,MY=10*1024*1024,aC=5,oC=async(e,t)=>{try{const r=Date.now();let n=0,i=0,a=0;const o=setInterval(()=>{const u=(Date.now()-r)/1e3;u>0&&(i=n*8/u/1024/1024,a=Math.min(100,(Date.now()-r)/Gu*100),t(a,n/1024/1024))},AY),s=()=>{clearInterval(o),t(100,n/1024/1024)};try{if(e==="download"){console.log("Starting real download speed test");const u=[],f=`?size=${kY}`;for(let h=0;h<aC;h++){const y=fetch(`/api/speedtest/download${f}`).then(async m=>{var v;if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const g=(v=m.body)==null?void 0:v.getReader();if(!g)throw new Error("ReadableStream not supported");let x=!1;for(;!x&&Date.now()-r<Gu;){const b=await g.read();x=b.done,b.value&&(n+=b.value.length)}x||await g.cancel()});u.push(y)}const p=new Promise(h=>setTimeout(h,Gu));await Promise.race([Promise.all(u),p])}else if(e==="upload"){console.log("Starting real upload speed test");const f=(m=>{const g=new ArrayBuffer(m),x=new Uint8Array(g);for(let v=0;v<m;v++)x[v]=Math.floor(Math.random()*256);return g})(MY),p={value:!1},h=()=>Date.now()-r>=Gu||p.value,y=[];for(let m=0;m<aC;m++){const g=(async()=>{try{for(;!h();){const x=await fetch("/api/speedtest/upload",{method:"POST",body:f,headers:{"Content-Type":"application/octet-stream"}});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);n+=f.byteLength}}catch(x){console.error("Error in upload chunk:",x)}})();y.push(g)}await new Promise(m=>setTimeout(m,Gu)),p.value=!0}}catch(u){throw console.error(`Error during ${e} speed test:`,u),u}finally{s()}const l=(Date.now()-r)/1e3,c=n*8/l/1024/1024;return console.log(`${e} test completed: ${n} bytes in ${l.toFixed(2)}s = ${c.toFixed(2)} Mbps`),parseFloat(c.toFixed(2))}catch(r){throw console.error(`Error measuring ${e} speed:`,r),r}};function $Y({customerId:e,testLocation:t,internetPlan:r}){const{toast:n}=Xi(),[i,a]=w.useState(!1),[o,s]=w.useState("Ready"),[l,c]=w.useState(null),[u,f]=w.useState(null),[p,h]=w.useState(null),[y,m]=w.useState(null),[g,x]=w.useState(null),[v,b]=w.useState("0 MB"),[_,S]=w.useState("0 MB"),[P,j]=w.useState(0),[O,N]=w.useState(0),[C,k]=w.useState("Waiting"),[E,I]=w.useState("Waiting"),[$,U]=w.useState("-"),[F,L]=w.useState("-"),[T,D]=w.useState("Chicago, IL"),[q,Z]=w.useState("-"),B=ni({mutationFn:async pe=>await(await $n("POST","/api/speed-tests",pe)).json(),onSuccess:pe=>{ga.invalidateQueries({queryKey:["/api/speed-tests"]}),n({title:"Test Completed",description:"Your speed test results have been saved.",duration:3e3})},onError:pe=>{n({title:"Error",description:"Failed to save test results. Please try again.",variant:"destructive",duration:3e3}),console.error("Error saving test results:",pe)}}),J=()=>{c(null),f(null),h(null),m(null),x(null),b("0 MB"),S("0 MB"),j(0),N(0),k("Waiting"),I("Waiting")},G=async()=>{if(!e){n({title:"Customer ID Required",description:"Please enter a Customer ID before starting the test.",variant:"destructive",duration:3e3});return}if(r==="not_specified"||!r){n({title:"Internet Plan Required",description:"Please select an Internet Plan before starting the test.",variant:"destructive",duration:3e3});return}if(!i){a(!0),J(),s("Initializing...");try{s("Getting connection info...");try{const Y=await(await fetch("https://api.ipify.org?format=json")).json();L(Y.ip),U("Detected ISP"),Z("~10 km")}catch(K){console.error("Error getting IP information:",K),L("Failed to detect")}s("Testing ping...");const pe=await NY();c(pe),s("Testing jitter...");const ae=await EY();f(ae),s("Testing packet loss...");const he=await TY();h(he),s("Testing download speed..."),k("Testing...");const Q=await oC("download",(K,Y)=>{j(K),b(`${Y.toFixed(1)} MB`),m(Math.floor(Y*8/(K/100)))});m(Q),k("Complete"),s("Testing upload speed..."),I("Testing...");const ce=await oC("upload",(K,Y)=>{N(K),S(`${Y.toFixed(1)} MB`),x(Math.floor(Y*8/(K/100)))});x(ce),I("Complete"),s("Test Complete"),console.log("Packet loss to be saved:",he);const de=typeof he=="number"?he:parseFloat(String(he))||0;console.log("Processed packet loss:",de),B.mutate({customerId:e,testLocation:t,internetPlan:r,downloadSpeed:Q,uploadSpeed:ce,ping:pe,jitter:ae,packetLoss:de,isp:$,ipAddress:F,server:T,distance:q,userAgent:navigator.userAgent,downloadData:parseFloat(v.replace(" MB","")),uploadData:parseFloat(_.replace(" MB","")),testDuration:12.4})}catch(pe){console.error("Error during speed test:",pe),s("Test Failed"),n({title:"Test Failed",description:"An error occurred during the speed test. Please try again.",variant:"destructive",duration:3e3})}finally{a(!1)}}},se=()=>{i&&(a(!1),s("Test Aborted"),k("Aborted"),I("Aborted"),n({title:"Test Aborted",description:"The speed test has been aborted.",duration:3e3}))};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Speed Test"}),d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(De,{className:`bg-primary hover:bg-blue-600 text-white ${i?"opacity-50 cursor-not-allowed":""}`,onClick:G,disabled:i,children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Test"]}),d.jsxs(De,{variant:"outline",className:`border border-red-500 text-red-500 hover:bg-red-500 hover:text-white ${i?"":"opacity-50 cursor-not-allowed"}`,onClick:se,disabled:!i,children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]}),"Abort"]})]}),d.jsx("div",{className:"text-sm text-gray-500",children:d.jsx("span",{children:o})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center",children:[d.jsx("div",{className:"flex justify-center",children:d.jsxs("div",{className:"relative w-24 h-24 mb-2",children:[d.jsx(Ix,{value:l??0,maxValue:100,color:"primary",invert:!0}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("span",{className:"text-2xl font-semibold font-mono",children:l!==null?l:"-"})})]})}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"Ping"}),d.jsx("p",{className:"text-sm text-gray-500",children:"milliseconds"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center",children:[d.jsx("div",{className:"flex justify-center",children:d.jsxs("div",{className:"relative w-24 h-24 mb-2",children:[d.jsx(Ix,{value:u??0,maxValue:10,color:"warning",invert:!0}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("span",{className:"text-2xl font-semibold font-mono",children:u!==null?u:"-"})})]})}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"Jitter"}),d.jsx("p",{className:"text-sm text-gray-500",children:"milliseconds"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center",children:[d.jsx("div",{className:"flex justify-center",children:d.jsxs("div",{className:"relative w-24 h-24 mb-2",children:[d.jsx(Ix,{value:p??0,maxValue:5,color:"destructive",invert:!0}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("span",{className:"text-2xl font-semibold font-mono",children:p!==null?`${p}%`:"-"})})]})}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"Packet Loss"}),d.jsx("p",{className:"text-sm text-gray-500",children:"percent"})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5",children:[d.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Connection Info"}),d.jsxs("ul",{className:"text-sm space-y-2",children:[d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"ISP:"}),d.jsx("span",{className:"font-medium",children:$})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"IP Address:"}),d.jsx("span",{className:"font-medium",children:F})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Server:"}),d.jsx("span",{className:"font-medium",children:T})]}),d.jsxs("li",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-500",children:"Distance:"}),d.jsx("span",{className:"font-medium",children:q})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"font-semibold text-gray-800",children:"Download"}),d.jsxs("div",{className:"flex items-center text-sm",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-primary mr-1"}),d.jsx("span",{children:C})]})]}),d.jsx("div",{className:"bg-gray-200 rounded-full h-2.5 mb-4",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-300",style:{width:`${P}%`}})}),d.jsxs("div",{className:"flex items-end justify-between",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-4xl font-bold font-mono",children:y??0}),d.jsx("span",{className:"text-lg font-medium ml-1",children:"Mbps"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Data Transferred"}),d.jsx("div",{className:"font-medium",children:v})]})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"font-semibold text-gray-800",children:"Upload"}),d.jsxs("div",{className:"flex items-center text-sm",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-1"}),d.jsx("span",{children:E})]})]}),d.jsx("div",{className:"bg-gray-200 rounded-full h-2.5 mb-4",children:d.jsx("div",{className:"bg-green-500 h-2.5 rounded-full transition-all duration-300",style:{width:`${O}%`}})}),d.jsxs("div",{className:"flex items-end justify-between",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-4xl font-bold font-mono",children:g??0}),d.jsx("span",{className:"text-lg font-medium ml-1",children:"Mbps"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Data Transferred"}),d.jsx("div",{className:"font-medium",children:_})]})]})]})]})]})}function He(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ar(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function hr(e,t){const r=He(e);return isNaN(t)?Ar(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function gn(e,t){const r=He(e);if(isNaN(t))return Ar(e,NaN);if(!t)return r;const n=r.getDate(),i=Ar(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function sC(e,t){const{years:r=0,months:n=0,weeks:i=0,days:a=0,hours:o=0,minutes:s=0,seconds:l=0}=t,c=He(e),u=n||r?gn(c,n+r*12):c,f=a||i?hr(u,a+i*7):u,p=s+o*60,y=(l+p*60)*1e3;return Ar(e,f.getTime()+y)}const v_=6048e5,DY=864e5;let IY={};function Cp(){return IY}function qi(e,t){var s,l,c,u;const r=Cp(),n=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=He(e),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Vs(e){return qi(e,{weekStartsOn:1})}function wF(e){const t=He(e),r=t.getFullYear(),n=Ar(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Vs(n),a=Ar(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Vs(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Tc(e){const t=He(e);return t.setHours(0,0,0,0),t}function Dm(e){const t=He(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ai(e,t){const r=Tc(e),n=Tc(t),i=+r-Dm(r),a=+n-Dm(n);return Math.round((i-a)/DY)}function RY(e){const t=wF(e),r=Ar(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Vs(r)}function Kb(e,t){const r=t*7;return hr(e,r)}function LY(e,t){return gn(e,t*12)}function FY(e){let t;return e.forEach(function(r){const n=He(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function BY(e){let t;return e.forEach(r=>{const n=He(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Wr(e,t){const r=Tc(e),n=Tc(t);return+r==+n}function y_(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function zY(e){if(!y_(e)&&typeof e!="number")return!1;const t=He(e);return!isNaN(Number(t))}function ff(e,t){const r=He(e),n=He(t),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function UY(e,t,r){const n=qi(e,r),i=qi(t,r),a=+n-Dm(n),o=+i-Dm(i);return Math.round((a-o)/v_)}function Cs(e){const t=He(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function lC(e){const t=He(e),r=t.getMonth(),n=r-r%3;return t.setMonth(n,1),t.setHours(0,0,0,0),t}function Ht(e){const t=He(e);return t.setDate(1),t.setHours(0,0,0,0),t}function SF(e){const t=He(e),r=Ar(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function g_(e,t){var s,l,c,u;const r=Cp(),n=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=He(e),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function _F(e){return g_(e,{weekStartsOn:1})}function cC(e){const t=He(e),r=t.getMonth(),n=r-r%3+3;return t.setMonth(n,0),t.setHours(23,59,59,999),t}const VY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WY=(e,t,r)=>{let n;const i=VY[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Rx(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const HY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GY={date:Rx({formats:HY,defaultWidth:"full"}),time:Rx({formats:KY,defaultWidth:"full"}),dateTime:Rx({formats:qY,defaultWidth:"full"})},YY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QY=(e,t,r,n)=>YY[e];function Yu(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=r!=null&&r.width?String(r.width):o;i=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[s]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const XY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nQ=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},iQ={ordinalNumber:nQ,era:Yu({values:XY,defaultWidth:"wide"}),quarter:Yu({values:ZY,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Yu({values:JY,defaultWidth:"wide"}),day:Yu({values:eQ,defaultWidth:"wide"}),dayPeriod:Yu({values:tQ,defaultWidth:"wide",formattingValues:rQ,defaultFormattingWidth:"wide"})};function Qu(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?oQ(s,f=>f.test(o)):aQ(s,f=>f.test(o));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=t.slice(o.length);return{value:c,rest:u}}}function aQ(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function oQ(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function sQ(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=t.slice(i.length);return{value:o,rest:s}}}const lQ=/^(\d+)(th|st|nd|rd)?/i,cQ=/\d+/i,uQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dQ={any:[/^b/i,/^(a|c)/i]},fQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pQ={any:[/1/i,/2/i,/3/i,/4/i]},hQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bQ={ordinalNumber:sQ({matchPattern:lQ,parsePattern:cQ,valueCallback:e=>parseInt(e,10)}),era:Qu({matchPatterns:uQ,defaultMatchWidth:"wide",parsePatterns:dQ,defaultParseWidth:"any"}),quarter:Qu({matchPatterns:fQ,defaultMatchWidth:"wide",parsePatterns:pQ,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qu({matchPatterns:hQ,defaultMatchWidth:"wide",parsePatterns:mQ,defaultParseWidth:"any"}),day:Qu({matchPatterns:vQ,defaultMatchWidth:"wide",parsePatterns:yQ,defaultParseWidth:"any"}),dayPeriod:Qu({matchPatterns:gQ,defaultMatchWidth:"any",parsePatterns:xQ,defaultParseWidth:"any"})},PF={code:"en-US",formatDistance:WY,formatLong:GY,formatRelative:QY,localize:iQ,match:bQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wQ(e){const t=He(e);return Ai(t,SF(t))+1}function jF(e){const t=He(e),r=+Vs(t)-+RY(t);return Math.round(r/v_)+1}function OF(e,t){var u,f,p,h;const r=He(e),n=r.getFullYear(),i=Cp(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(p=i.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,o=Ar(e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const s=qi(o,t),l=Ar(e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=qi(l,t);return r.getTime()>=s.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function SQ(e,t){var s,l,c,u;const r=Cp(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=OF(e,t),a=Ar(e,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),qi(a,t)}function CF(e,t){const r=He(e),n=+qi(r,t)-+SQ(r,t);return Math.round(n/v_)+1}function at(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Va={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return at(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):at(r+1,2)},d(e,t){return at(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return at(e.getHours()%12||12,t.length)},H(e,t){return at(e.getHours(),t.length)},m(e,t){return at(e.getMinutes(),t.length)},s(e,t){return at(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return at(i,t.length)}},fl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},uC={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Va.y(e,t)},Y:function(e,t,r,n){const i=OF(e,n),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return at(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):at(a,t.length)},R:function(e,t){const r=wF(e);return at(r,t.length)},u:function(e,t){const r=e.getFullYear();return at(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return at(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return at(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Va.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return at(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=CF(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):at(i,t.length)},I:function(e,t,r){const n=jF(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):at(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Va.d(e,t)},D:function(e,t,r){const n=wQ(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):at(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return at(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return at(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return at(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=fl.noon:n===0?i=fl.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=fl.evening:n>=12?i=fl.afternoon:n>=4?i=fl.morning:i=fl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Va.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Va.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):at(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):at(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Va.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Va.s(e,t)},S:function(e,t){return Va.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return fC(n);case"XXXX":case"XX":return ts(n);case"XXXXX":case"XXX":default:return ts(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return fC(n);case"xxxx":case"xx":return ts(n);case"xxxxx":case"xxx":default:return ts(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+dC(n,":");case"OOOO":default:return"GMT"+ts(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+dC(n,":");case"zzzz":default:return"GMT"+ts(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return at(n,t.length)},T:function(e,t,r){const n=e.getTime();return at(n,t.length)}};function dC(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+t+at(a,2)}function fC(e,t){return e%60===0?(e>0?"-":"+")+at(Math.abs(e)/60,2):ts(e,t)}function ts(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=at(Math.trunc(n/60),2),a=at(n%60,2);return r+i+t+a}const pC=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},NF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},_Q=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return pC(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",pC(n,t)).replace("{{time}}",NF(i,t))},PQ={p:NF,P:_Q},jQ=/^D+$/,OQ=/^Y+$/,CQ=["D","DD","YY","YYYY"];function NQ(e){return jQ.test(e)}function EQ(e){return OQ.test(e)}function TQ(e,t,r){const n=AQ(e,t,r);if(console.warn(n),CQ.includes(e))throw new RangeError(n)}function AQ(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$Q=/^'([^]*?)'?$/,DQ=/''/g,IQ=/[a-zA-Z]/;function Ze(e,t,r){var u,f,p,h,y,m,g,x;const n=Cp(),i=(r==null?void 0:r.locale)??n.locale??PF,a=(r==null?void 0:r.firstWeekContainsDate)??((f=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(p=n.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((m=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:m.weekStartsOn)??n.weekStartsOn??((x=(g=n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=He(e);if(!zY(s))throw new RangeError("Invalid time value");let l=t.match(MQ).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=PQ[b];return _(v,i.formatLong)}return v}).join("").match(kQ).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:RQ(v)};if(uC[b])return{isToken:!0,value:v};if(b.match(IQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&EQ(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&NQ(b))&&TQ(b,t,String(e));const _=uC[b[0]];return _(s,b,i.localize,c)}).join("")}function RQ(e){const t=e.match($Q);return t?t[1].replace(DQ,"'"):e}function LQ(e){const t=He(e),r=t.getFullYear(),n=t.getMonth(),i=Ar(e,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function FQ(e){return Math.trunc(+He(e)/1e3)}function BQ(e){const t=He(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function zQ(e,t){return UY(BQ(e),Ht(e),t)+1}function Im(e,t){const r=He(e),n=He(t);return r.getTime()>n.getTime()}function kl(e,t){const r=He(e),n=He(t);return+r<+n}function Ly(e,t){const r=He(e),n=He(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function UQ(e,t){const r=He(e),n=He(t);return r.getFullYear()===n.getFullYear()}function EF(e,t){const r=+He(e),[n,i]=[+He(t.start),+He(t.end)].sort((a,o)=>a-o);return r>=n&&r<=i}function Zh(e,t){return hr(e,-t)}function Lx(e,t){const r=He(e),n=r.getFullYear(),i=r.getDate(),a=Ar(e,0);a.setFullYear(n,t,15),a.setHours(0,0,0,0);const o=LQ(a);return r.setMonth(t,Math.min(i,o)),r}function hC(e,t){const r=He(e);return isNaN(+r)?Ar(e,NaN):(r.setFullYear(t),r)}function rs(e,t){return gn(e,-t)}function mC(e,t){const{years:r=0,months:n=0,weeks:i=0,days:a=0,hours:o=0,minutes:s=0,seconds:l=0}=t,c=rs(e,n+r*12),u=Zh(c,a+i*7),f=s+o*60,h=(l+f*60)*1e3;return Ar(e,u.getTime()-h)}function VQ({onViewDetails:e}){const{data:t,isLoading:r,isError:n}=Eo({queryKey:["/api/speed-tests"],staleTime:1e4});console.log("Speed tests response:",t);const i=(t==null?void 0:t.data)||[],a=!r&&!n&&i&&i.length>0,o=s=>{const l=new Date(s);return Ze(l,"yyyy-MM-dd HH:mm:ss")};return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[d.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Test History"}),r&&d.jsxs("div",{className:"text-center py-10 text-gray-500",children:[d.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto mb-2 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsx("p",{children:"Loading test results..."})]}),n&&d.jsxs("div",{className:"text-center py-10 text-red-500",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("p",{children:"Failed to load test results. Please try again later."})]}),!r&&!n&&!a&&d.jsxs("div",{className:"text-center py-10 text-gray-500",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("p",{children:"No test results yet. Run a test to see your results here."})]}),a&&d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer ID"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Download"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Upload"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ping"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jitter"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Packet Loss"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ISP"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>{const l=(v,b,_,S)=>v[b]!==void 0&&v[b]!==null?v[b]:v[_]!==void 0&&v[_]!==null?v[_]:S,c=l(s,"customerId","customer_id","-"),u=l(s,"downloadSpeed","download_speed",0),f=l(s,"uploadSpeed","upload_speed",0),p=l(s,"ping","ping",0),h=l(s,"jitter","jitter",0),y=l(s,"packetLoss","packet_loss",0),m=l(s,"timestamp","timestamp",null),g=l(s,"isp","isp","-"),x=(()=>{try{if(!m)return"-";const v=typeof m=="string"?m:typeof m=="number"?new Date(m).toISOString():m instanceof Date?m.toISOString():null;return v?o(v):"-"}catch(v){return console.error("Error formatting timestamp:",v),"-"}})();return d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:x}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u>0?`${u.toFixed(2)} Mbps`:"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f>0?`${f.toFixed(2)} Mbps`:"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:p>0?`${p.toFixed(1)} ms`:"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:h>0?`${h.toFixed(1)} ms`:"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:y>0?`${y.toFixed(1)}%`:"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:g}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx(De,{variant:"ghost",size:"sm",className:"text-primary hover:text-blue-700",onClick:()=>e(s),children:d.jsx($7,{className:"h-4 w-4"})})})]},s.id)})})]})})]})}function WQ({test:e,onClose:t}){const r=i=>{const a=new Date(i);return Ze(a,"yyyy-MM-dd HH:mm:ss")},n=()=>{const i=["Parameter,Value",`Test ID,ST-${e.id}`,`Test Date,${r(e.timestamp.toString())}`,`Customer ID,${e.customerId}`,`Location,${e.testLocation||"Not specified"}`,`ISP,${e.isp||"Not detected"}`,`IP Address,${e.ipAddress||"Not detected"}`,`Server,${e.server||"Not specified"}`,`Distance,${e.distance||"Not calculated"}`,`User Agent,${e.userAgent||"Not recorded"}`,`Download Speed,${e.downloadSpeed.toFixed(2)} Mbps`,`Upload Speed,${e.uploadSpeed.toFixed(2)} Mbps`,`Ping,${e.ping.toFixed(1)} ms`,`Jitter,${e.jitter.toFixed(1)} ms`,`Packet Loss,${e.packetLoss.toFixed(1)}%`,`Download Data,${e.downloadData?e.downloadData.toFixed(1):"0"} MB`,`Upload Data,${e.uploadData?e.uploadData.toFixed(1):"0"} MB`,`Test Duration,${e.testDuration?e.testDuration.toFixed(1):"0"} seconds`,`Internet Plan,${e.internetPlan||"Not specified"}`].join(`
root@testserver:/opt/speedtest#
